<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OneType</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" integrity="sha384-4LISF5TTJX/fLmGSxO53rV4miRxdg84mZsxmO8Rx5jGtp/LbrixFETvWa5a6sESd" crossorigin="anonymous">
    <script type="module" defer src="./src/main.js"></script>
    <link rel="stylesheet" type="text/css" href="public/css/index.css">
    <link rel="stylesheet" type="text/css" href="public/css/header.css">
    <link rel="stylesheet" type="text/css" href="public/css/aside.css">
    <link rel="stylesheet" href="public/css/test.css">
</head>
<body >
    <div id="app" >
        <div >
            <header>
                <div  class="menu" @click="showParams" >
                    <i class="bi bi-text-paragraph"></i>
                </div>
                <nav>
                    <ul>
                        <li><a href="./HowYouCanHelp.html">
                            <span class="link_text" >Help Me</span>
                            <span class="link_icon"><i class="bi bi-coin"></i></span>
                        </a></li>
                        <li><a href="#">
                            <span class="link_text" >My Others Projects</span>
                            <span class="link_icon"><i class="bi bi-github"></i></span>
                        </a></li>
                        <li><a href="./Contributing.html">
                            <span class="link_text" >Contribute</span>
                            <span class="link_icon"><i class="bi bi-info-circle"></i></span>
                        </a></li>
                    </ul>
                </nav>
            </header>
            
            <form id="params">
                <div class="head-params">
                    <h2>Parametres</h2>
                    <button type="button" @click="closeParams()">close</button>
                </div>
                <div>
                    <h3 id="show-duration">Duration of the test : {{this.params.duration}} minutes</h3><br>
                    <input style="width:100%;" type="range" @change="changeDuration" name="duration" id="duration" min="1" max="10">
                </div>
                <div class="difficult">
                    <p id="easy" @click="changeDifficulty" :class="{diff:this.params.difficulty=='easy'}" >easy</p>
                    <p id="normal" @click="changeDifficulty" :class="{diff:this.params.difficulty=='normal'}">normal</p>
                    <p id="hard" @click="changeDifficulty" :class="{diff:this.params.difficulty=='hard'}">hard</p>
                </div>
                <div class="theme">
                    <p id="black-green" @click="changeTheme" :class="{diff:this.ui.theme=='black-green'}">black-green</p>
                    <p id="white-green" @click="changeTheme" :class="{diff:this.ui.theme=='white-green'}">white-green</p>
                </div>
                <div >
                    <select name="sound" class="sound" id="sound" @change="test">
                        <option value="click">click</option>
                        <option value="cherryBlue">cherryBlue</option>
                        <option value="keyboard">keyboard</option>
                        <option value="typeSoft">typeSoft</option>
                    </select>
                </div>
            </form>
        
            <main>
                <p  class="comment">start typing to start the test</p>
                <article id="test"></article>
                <h2 id="timer"></h2>
                <div id="info">
                    
                </div>
            </main>
        
            <footer>
                <div class="logo">
        
                </div>
                <div class="message"></div>
                <div class="links">
        
                </div>
            </footer>
        </div>        
    </div>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>

        const app = Vue.createApp({
            data() {
                return {
                    ui:null,
                    params:null,
                }
            },
            created(){
                this.getUI();
                this.getParams();
                document.body.className = this.ui.theme;
            }
            ,
            methods:{
                getUI(){
                    const initialUi={
                        theme:"black-green",
                    }
                    this.ui = JSON.parse(localStorage.getItem("ui")) || initialUi;
                },
                getParams(){
                    const initialParams={
                        difficulty:"easy",
                        duration:1,
                        language:"en",
                        sound:"cherryBlue"
                    }
                    this.params = JSON.parse(localStorage.getItem("params")) || initialParams;
                },
                showParams(){
                    document.getElementById("params").style.left = "0px";
                },
                closeParams(){
                    document.getElementById("params").style.left = "-80%";
                },
                save(){
                    localStorage.setItem("ui",JSON.stringify(this.ui));
                    localStorage.setItem("params",JSON.stringify(this.params));
                },
                changeDifficulty(e){
                    this.params.difficulty = e.target.innerText;
                    this.save();
                },
                changeDuration(e){
                    this.params.duration = e.target.value;
                    this.save();
                },
                changeTheme(e){
                    this.ui.theme = e.target.innerText;
                    document.body.className = this.ui.theme;
                    this.save();
                },
                test(e){
                    this.params.sound = e.target.value;
                    this.save();
                }
            }
        });
        
        app.mount('#app');

    </script>
</body>
</html>